## *Deepseek*

### **Основные подходы к построению многопроцессорных систем**  

Многопроцессорные системы позволяют повысить производительность за счёт параллельного выполнения задач на нескольких процессорах. Существует несколько ключевых подходов к их организации, которые различаются архитектурой, способами взаимодействия процессоров и памятью.  

---

## 1. Классификация по организации памяти  

### 1.1. Системы с общей памятью (UMA — Uniform Memory Access)  
- Все процессоры разделяют единое адресное пространство.  
- Доступ к памяти равномерный (одинаковая задержка для всех CPU).  
- **Примеры**: SMP (Symmetric Multiprocessing), многоядерные CPU.  
- **Преимущества**: простота программирования (общие данные).  
- **Недостатки**: ограниченная масштабируемость из-за конфликтов доступа к памяти.  

### 1.2. Системы с распределённой памятью (NUMA — Non-Uniform Memory Access) 
- Каждый процессор имеет локальную память, но может обращаться к чужой (с большей задержкой).  
- **Примеры**: серверные платформы (AMD EPYC, Intel Xeon Scalable).  
- **Преимущества**: лучше масштабируется.  
- **Недостатки**: сложнее программировать (необходимо учитывать локальность данных).  

### 1.3. Системы с разделяемой памятью и когерентностью кэшей (CC-NUMA)  
- Разновидность NUMA, где аппаратно поддерживается когерентность кэшей.  
- **Примеры**: современные многопроцессорные серверы.  

### 1.4. Системы без общей памяти (MPP — Massively Parallel Processing)  
- Каждый процессор имеет свою память, обмен данными — через сообщения (например, MPI).  
- **Примеры**: суперкомпьютеры (IBM Blue Gene, Cray).  
- **Преимущества**: отличная масштабируемость.  
- **Недостатки**: сложность синхронизации и передачи данных.  

---

## 2. Классификация по способу связи процессоров  

### 2.1. Жёстко связанные системы (Tightly Coupled)  
- Процессоры тесно интегрированы, используют общую шину или коммутатор.  
- **Пример**: SMP-системы.  

### 2.2. Слабо связанные системы (Loosely Coupled)  
- Процессоры соединены через сеть (Ethernet, InfiniBand).  
- **Пример**: кластерные системы.  

---

## 3. Классификация по архитектуре  

### 3.1. Симметричная многопроцессорность (SMP — Symmetric Multiprocessing)  
- Все процессоры равноправны, выполняют любые задачи.  
- **Пример**: многоядерные CPU, серверные платформы.  

### 3.2. Асимметричная многопроцессорность (AMP — Asymmetric Multiprocessing)  
- Процессоры специализированы (например, CPU + GPU, CPU + DSP).  
- **Пример**: встраиваемые системы (ARM big.LITTLE).  

---

## 4. Классификация по масштабу  

### 4.1. Многопроцессорные системы в одном корпусе 
- Несколько CPU на одной материнской плате (SMP, NUMA).  

### 4.2. Кластерные системы  
- Множество компьютеров, объединённых сетью (MPP, Beowulf).  

### 4.3. Грид-системы (Grid Computing)  
- Распределённые вычисления на глобальном уровне (BOINC, распределённые вычисления).  

---

## **Вывод**  
Выбор архитектуры зависит от задачи:  
- **Общая память (UMA/SMP)** — удобно для серверов и ПК.  
- **Распределённая память (NUMA/MPP)** — для суперкомпьютеров.  
- **Кластеры** — для масштабируемых распределённых вычислений.  

Каждый подход имеет свои преимущества и ограничения, связанные с производительностью, сложностью программирования и стоимостью.


### ***Подробно***

Когда говорят о многопроцессорности имеют ввиду наличие в системе процессоров, способных выполнять пользовательские программы. Микропроцессоры в функциональных модулях в расчет не идут.

Многопроцессорные системы отличаются двумя вещами: отношением процессор -> память и отношением  процессор -> процессор.

В зависимости от решения этих задач получают различные функциональные схемы систем, с возможными характеристиками и параметрами.

Можно выделить 3 базовых конфигурации SMP, MPP, NUMA

Симметричные мультипроцессорные системы - (SMP, Symmetric Multiprocessor).

В симметричной системе все ресурсы системы (ОЗУ, ВУ) общие и все процессоры имеют одинаковые прав на их использование. В самом общем виде SMP система имеет вид представлены на рисунке.

![[Pasted image 20250615221313.png]]

  
Рис.13. Организация симметричной мультипроцессорной системы

Важным аспектом архитектуры симметричных мультипроцессоров является способ взаимодействия процессоров с общими ресурсами (памятью и системой ввода/вывода). С этих позиций можно выделить следующие виды архитектуры SMP-систем:

с общей шиной и временным разделением;

с коммутатором типа «кроссбар»;

с многопортовой памятью;

с централизованным устройством управления.

Архитектура с общей шиной

Структура и интерфейсы общей шины в основном такие же, как и в однопроцессорной ВС, где шина служит для внутренних соединений (рис. 14).

![[Pasted image 20250615221751.png]]

Рис. 14. Структура мультипроцессорной системы с общей шиной

Общая шина позволяет легко расширять систему путем подключения к себе большего числа процессоров. Кроме того, шина – это по существу, пассивная среда, и отказ одного из подключенных к ней устройств не влечет отказа всей совокупности.

В то же время SMP-системам па базе общей шины свойственен и основной недостаток шинной организации – невысокая производительность: скорость системы ограничена временем цикла шины. По этой причине каждый процессор снабжен кэш-памятью, что существенно уменьшает число обращений к шине. Наличие множества кэшей порождает проблему их когерентности, и это одна из основных причин, по которой системы на базе общей шины обычно содержат не слишком много процессоров.

При построении систем с обшей шиной возникает проблема управления доступом процессоров к общей шине. По терминологии Intel имеется два подхода: сильно связанные и слабо связанные системы.

  
**В сильно связанных системах** процессоры объединяются в группу, они разделяют все линии интерфейса, и с точки зрения внешнего наблюдателя выглядят, как один процессор. Один из них назначается ведущим, а все остальные ведомыми. Ведущий всегда владеет системной шиной, а остальные просят у него разрешение на доступ и получают его в соответствии с назначенными приоритетами. Примером может служить организация многопроцессорной группы с процессором 8086,

где 86 – ЦП, 87 – сопроцессор, 89 – процессор ввода/вывода

![[Pasted image 20250615221805.png]]


Особенностью такого решения является то, что не все процессоры могу объединяться в такие группы. Дело в том, процессоры по своей природе могут быть только ведущими, только ведомыми, и универсальными (и ведущими,  и ведомыми в зависимости от включения). Отсюда выходит, что процессоры спроектированные как ведущие в такие группы объединятся не могут. Все процессоры Intel до Pentium 2 спроектированы как ведущие, остальные могли быть как ведущим, так и ведомым, т.е. можно на их основе построить сильно связанную систему:  Pentium 3 позволял строить систему из 2 процессоров, Pentium 4 из 4 процессоров.

Если все процессоры ведущие, то проблему управления доступом придется решать внешними схемами так называемым арбитром (слабо связанная конфигурация)

В слабоявязанных конфигурациях любой процессорный модуль м.б. ведущим и может содержать в себе сколько угодно ЦП. В слабоявязанных конфигурациях прямые связи между ЦП отсутствуют, и взаимодействие осуществляется через внешнего арбитра.

  

**в такой системе процессоры подключаются к системной шине чрез схему доступа, которая держит выходы процессора в отключенном от шины состоянии и разрешает подключение при получении сигнала от арбитра. Если процессору нужен доступ к  шине он выставляет сигнал «запрос» арбитру и арбитр, если не занято выставляет сигнал «разрешение», получив разрешение процессорный модуль выставляет сигнал «занято» и владеет шиной (Время владения шиной ограничено)**

![[Pasted image 20250615221243.png]]