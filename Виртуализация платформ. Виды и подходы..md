(из лекции)
Под виртуализацией платформ понимают создание программных систем на основе существующих аппаратно-программных комплексов, зависящих или независящих от них. Система, предоставляющая аппаратные ресурсы и программное обеспечение, называется хостовой (host), а симулируемые ей системы — гостевыми (guest). Чтобы гостевые системы могли стабильно функционировать на платформе хостовой системы, необходимо, чтобы программное и аппаратное обеспечение хоста было достаточно надежным и предоставляло необходимый набор интерфейсов для доступа к его ресурсам. Есть несколько видов виртуализации платформ, в каждом из которых осуществляется свой подход к понятию «виртуализация». Виды виртуализации платформ зависят от того, насколько полно осуществляется симуляция аппаратного обеспечения. До сих пор нет единого соглашения о терминах в сфере виртуализации, поэтому некоторые из приведенных далее видов виртуализации могут отличаться от тех, что предоставят другие источники.

Виды виртуализации платформ.

**1.** **Виртуализация на основе аппаратных разделов** (**Partition****)
Это ничто иное, как разделение процессора или процессоров компьютера, его памяти, подсистем ввода вывода и места в некоторое количество наборов ресурсов таким образом, что каждый набор ресурсов может работать параллельно (независимо друг от друга) со своим собственным экземпляром операционной системы и приложениями. Простыми словами это разбиение ресурсов машины на аппаратные разделы 
Аппаратные разделы  обеспечивают полную изоляцию и надежную защиту раздела от аппаратных и программных сбоев в соседних разделах. Таким образом, аппаратные разделы обеспечивают возможность выполнения нескольких независимых копий разных операционных систем и предоставляют возможность перераспределения ресурсов между разделами (при этом требуется перезагрузка только реконфигурируемых разделов, остальные разделы продолжают работать). Применение данной методики не влечет возникновения накладных расходов на виртуализацию, неизбежных при использовании других методов, и позволяет эффективно использовать вычислительные ресурсы hi-end серверов. У разных производителей названия и подходы к реализации этого разные, но суть одна. Рисунок 2.
![[Pasted image 20250619205453.png]]
Рис.2 Виртуализация на основе аппаратных разделов (Partition).

 У IBM это называется LPAR (Logical partition). Например для серверов класса System P  максимальное количество LPAR на сервере зависит от количества процессоров и памяти: на один процессор можно создать максимум 10 LPAR, выделив на каждый LPAR минимальную долю в 0.1 часть ресурсов процессора и минимум по 256 Мб оперативной памяти. Теоретическое ограничение тоже есть: на 795 модели System P можно создать максимум 254 LPAR.

У HP это называется nPartition (nPar) — аппаратные партиции.  nPar полностью электрически изолированный раздел. В nPar может быть выделен один или более cell'ов (ячеек) сервера. В каждой ячейки находятся свои процессора, память и устройства ввода-вывода. Каждая n-партиция строится на базе одной или нескольких блейд-ячеек с процессорами, оперативной памятью, а также назначенной ей подсистемы ввода-вывода, включая интерфейсные адаптеры, выделенный путь загрузки ОС. В каждом таком разделе работает отдельный образ операционной системы. Минимальный шаг деления сервера на n-партиции — одна ячейка (2 процессорных разъема) Одна ячейка может содержать до 128 ГБ памяти и 12 PCI-адаптеров. Аппаратный раздел/сервер может быть поделен на программные виртуальные разделы (vPar) и/или на виртуальные машины (VM) с помощью единой платформы управления — VSP

У SUN это называется - технология DSD (Dynamic System Domain) . Количество доменов определяется лишь числом плат в системе


2.**Эмуляция (симуляция)**.

При этом подходе возможно два варианта: эмуляция (симуляция) среды исполнения программ и эмуляция оборудования. При эмуляции среды исполнения программ создается некоторая виртуальная машина для исполнения заданного класса программ. Примером может служить среда исполнения java программ, которая часто называется java - машиной, а также эмуляторы для разработки различных систем (кросс системы) и обучения (системы моделирования).

Эмуляция оборудования – самая сложная виртуализация. В этом методе VM аппаратных средств создается на хост-системе, чтобы эмулировать интересующее оборудование. Эмуляция оборудования использует VM, чтобы моделировать необходимые аппаратные средства. Таким образом, с помощью программы виртуализации, предоставляется возможность работы с виртуальным (эмулирующим работу оригинального) оборудованием. Вместо того чтобы дожидаться, когда реальные аппаратные средства будут в наличии, разработчики встроенного программного обеспечения могут использовать виртуальное оборудование для разработки и тестирования программного обеспечения.

 Здесь возможны варианты: эмуляция несуществующего оборудования в данной машине с целью отладки ПО и эмуляция всей машины или полная эмуляция для запуска ОС.

При полной эмуляции виртуальная машина полностью виртуализирует все аппаратное обеспечение при сохранении гостевой операционной системы в неизменном виде. Такой подход позволяет эмулировать различные аппаратные архитектуры. Например, можно запускать виртуальные машины с гостевыми системами для x86-процессоров на платформах с другой архитектурой (например, на RISC-серверах компании Sun). Долгое время такой вид виртуализации использовался, чтобы разрабатывать программное обеспечение для новых процессоров еще до того, как они были физически доступными. Такие эмуляторы также применяют для низкоуровневой отладки операционных систем.
![[Pasted image 20250619205617.png]]
Рис.3 Эмуляция аппаратных средств

Главная проблема при эмуляции аппаратных средств состоит существенном замедлении выполнения программ в такой среде. Поскольку каждая команда должна моделироваться на основных аппаратных средствах, при этом замедление в 100 раз при эмуляции является обычным делом. Однако эмуляция аппаратных средств имеет существенные преимущества. Например, используя эмуляцию аппаратных средств, можно управлять неизмененной операционной системой, предназначенной для PowerPC® на системе с ARM процессором. также можно управлять многочисленными виртуальными машинами, каждая из которых будет моделировать другой процессор.

Примеры продуктов для создания эмуляторов: Bochs, PearPC, QEMU (без ускорения), Hercules Emulator

Среди свободных программ для эмуляции оборудования можно указать Bochs ([http://bochs.sourceforge.net](http://bochs.sourceforge.net) ), QEMU ([http://www.qemu.org](http://www.qemu.org) ) и FAUmachine ([http://www3.informatik.uni-erlangen.de/Research/FAUmachine](http://www3.informatik.uni-erlangen.de/Research/FAUmachine) ).

QEMU — свободная программа с открытым исходным кодом для эмуляции аппаратного обеспечения различных платформ.

Включает в себя эмуляцию процессоров Intel x86 и устройств ввода-вывода. Может эмулировать 80386, 80486, Pentium, Pentium Pro, AMD64 и другие x86-совместимые процессоры; ARM, MIPS, RISC-V, PowerPC, SPARC, SPARC64 и частично m68k.

Bochs-это очень портативный эмулятор ПК с открытым исходным кодом IA-32 (x86), написанный на C++ и работающий на большинстве популярных платформ. Он включает в себя эмуляцию процессора Intel x86, распространенных устройств ввода-вывода и настраиваемого BIOS. Bochs могут быть скомпилированы для эмуляции множества различных процессоров x86, от ранних 386 до самых последних процессоров Intel и AMD x86-64, которые, возможно, даже еще не вышли на рынок.

Bochs способен запускать большинство операционных систем внутри эмуляции, включая Linux, DOS или Microsoft Windows. Bochs был первоначально написан Кевином Лоутоном и в настоящее время поддерживается этим проектом.

 Основной минус данного подхода заключается в том, что эмулируемое аппаратное обеспечение весьма и весьма существенно замедляет быстродействие гостевой системы, что делает работу с ней очень неудобной, поэтому, кроме как для разработки системного программного обеспечения, а также образовательных целей, такой подход мало где используется.


3.**Полная (аппаратная) (нативная виртуализация)**.

Для повышения производительности необходимо, что бы гостевые ОС работали с процессором напрямую, без эмуляции команд. В этом случае виртуальная машина виртуализует лишь необходимое количество аппаратного обеспечения, чтобы она могла быть запущена изолированно. Но такой подход позволяет запускать гостевые операционные системы, разработанные только для той же архитектуры, что и у хоста. Таким образом, несколько экземпляров гостевых систем могут быть запущены одновременно. Этот вид виртуализации позволяет существенно увеличить быстродействие гостевых систем по сравнению с полной эмуляцией и широко используется в настоящее время. Для обеспечения независимости ВМ в платформах виртуализации, использующих данный подход, применяется специальная программная прослойка  между гостевой операционной системой и оборудованием, позволяющая гостевой системе напрямую обращаться к ресурсам аппаратного обеспечения  Эта прослойка  получила название **гипервизор.** Гипервизор, называемый также «Монитор виртуальных машин» (Virtual Machine Monitor) — одно из ключевых понятий в мире виртуализации.

![[Pasted image 20250619205637.png]]
Рис. 4 Полная виртуализация.

Полная виртуализация использует гипервизор, чтобы разделять основные аппаратные средства

 Применение гипервизора, являющегося связующим звеном между гостевыми системами и аппаратурой, существенно увеличивает быстродействие платформы, приближая его к быстродействию физической платформы.

Взаимодействие между гостевой операционной системой (ОС) и оборудованием осуществляется посредством гипервизора. Внутри гипервизора должна быть установлена и настроена определенная защита, потому, что основные аппаратные средства не принадлежат ОС, а разделяются гипервизором. При построении крупных корпоративных систем, как правило, используется именно такая виртуализация. При этом крупные вендоры, такие как VMware, IBM и Microsoft разрабатывают свои платформы виртуализации на базе технологий аппаратной поддержки полной виртуализации Intel VT (VT-x), AMD-V.

К минусам данного вида виртуализации можно отнести зависимость виртуальных машин от архитектуры аппаратной платформы.

Примеры продуктов для нативной виртуализации: VMware Workstation, VMware Server, VMware ESX Server, Virtual Iron, Virtual PC, VirtualBox, Parallels Desktop и другие.

Возникает вопрос: а всегда-ли есть возможность создания эффективного гипервизора? Этому вопросу посвящена  статья на сайте:  [https://habr.com/ru/company/intel/blog/196444/](https://habr.com/ru/company/intel/blog/196444/)  

_Критерии возможности создания эффективного монитора виртуальных машин были сформулированы в классической работе 1974 г. Жеральда Попека и Роберта Голдберга «Formal requirements for virtualizable third generation architectures»._

Сформулируем основные результаты этой статьи.

Выдвигаемые требования на монитор виртуальных машин (ВМ):

·       Изоляция — каждая виртуальная машина должна иметь доступ только к тем ресурсам, которые были ей назначены. Она не должна иметь возможности повлиять на работу, как монитора, так и других ВМ.

·       Эквивалентность — любая программа, исполняемая под управлением ВМ, должна демонстрировать поведение, полностью идентичное её исполнению на реальной системе, за исключением эффектов, вызванных двумя обстоятельствами: различием в количестве доступных ресурсов (например, ВМ может иметь меньший объём памяти) и длительностями операций (из-за возможности разделения времени исполнения с другими ВМ).

·       Эффективность — в оригинальной работе условие сформулировано следующим образом: «статистически преобладающее подмножество инструкций виртуального процессора должно исполняться напрямую хозяйским процессором, без вмешательства монитора ВМ». Другими словами, значительная часть инструкций должна симулироваться в режиме прямого исполнения..

 Модель машины классическая : процессор и память.

 Процессор поддерживает два режима работы: режим супервизора, используемый операционной системой, и режим пользователя, в котором исполняются прикладные приложения.

 Система команд содержит 3 группы команд:

·       привилегированные(англ. Privileged), которые могут изменять состояние процессора, выполняются в режиме супервизора,

·       служебные (англ. Sensitive), которые могут изменять состояние процессора, и могут выполняться в обоих режимах  работы процессора,

·       безвредные (англ. Innocuous), не являющиеся служебными, не могу изменить состояние процессора и могут выполняться в обоих режимах  работы процессора,

Считается, что для некоторых входных условий инструкция вызывает исключение ловушки (англ. trap), ловушки могут иметь два признака:

·       вызванные попыткой изменить состояние процессора (ловушка потока управления).

·       Обращения к содержимому памяти, выходящему за пределы диапазона, определённого для данной программы (ловушка защиты памяти)

Достаточное условие построения монитора ВМ

Возможности построения монитора виртуальных машин с соблюдение трёх сформулированных выше требований, даётся в следующем предложении: множество служебных инструкций является подмножеством привилегированных инструкций (рис. 1).
![[Pasted image 20250619205655.png]]
Рис. 5: Выполнение условия виртуализуемости.

Изоляция обеспечивается размещением монитора в режиме супервизора, а ВМ — только в пользовательском. При этом последние не могут самовольно изменить системные ресурсы — попытка вызовет ловушку потока управления на служебной инструкции и переход в монитор, а также память из-за того, что конфигурация не допускает этого, и процессор выполнит ловушку защиты памяти.

Эквивалентность доказывается тем, что безвредные инструкции выполняются одинаково вне зависимости от того, присутствует ли в системе монитор или нет, а служебные всегда вызывают исключение и интерпретируются.

Эффективность гарантируется тем, что все безвредные инструкции внутри ВМ исполняются напрямую, без замедления. При этом подразумевается, что их множество включает в себя «статистически преобладающее подмножество инструкций виртуального процессора». Множество служебных инструкций является подмножеством привилегированных

Несмотря на простоту использованной модели и полученных из неё выводов, работа Голдберга и Попека является актуальной до сих пор. Следует отметить, что несоблюдение описанных в ней условий вовсе не делает создание или использование виртуальных машин на некоторой архитектуре принципиально невозможным, и есть практические примеры реализаций, подтверждающие это. Однако соблюсти оптимальный баланс между тремя свойствами: изоляцией, эквивалентностью и эффективностью, — становится невозможным. Чаще всего расплачиваться приходится скоростью работы виртуальных машин из-за необходимости тщательного поиска и программного контроля за исполнением ими служебных, но не привилегированных инструкций, так как сама аппаратура не обеспечивает этого (рис. 2). Даже единственная такая инструкция, исполненная напрямую ВМ, угрожает стабильной работе монитора, и поэтому он вынужден сканировать весь поток гостевых инструкций.

![[Pasted image 20250619205728.png]]
Рис. 6: Невыполнение условия виртуализуемости.

Служебные, но не привилегированные инструкции требуют реализации сложной логики в мониторе

Структура гостевых программ

Для эффективной работы программ внутри ВМ необходимо, чтобы большая часть их инструкций являлись безвредными. Как правило, это верно для прикладных приложений. Операционные системы, в свою очередь, предназначены для управления ресурсами системы, что подразумевает использование ими привилегированных и служебных инструкций, и монитору приходится их перехватывать и интерпретировать с соответствующим падением производительности. Поэтому в идеале в наборе инструкций должно быть как можно меньше привилегированных для того, чтобы частота возникновения ловушек была минимальной.

В процессорах Intel и AMD условия виртуализуемости изначально не выполнялись  и пришлось добавить технологии аппаратной поддержки полной виртуализации - Intel VT (VT-x), AMD-V. Подходы к решению этой задачи у Intel и AMD разные , по сути пришлось добавить еще набор команд, исполняемых в режиме гипервизора



4.**Частичная виртуализация**, а также «виртуализация адресного пространства» («address space virtualization»).

При таком подходе, виртуальная машина симулирует несколько экземпляров аппаратного окружения (но не всего), в частности, пространства адресов. Такой вид виртуализации позволяет совместно использовать ресурсы и изолировать процессы, но не позволяет разделять экземпляры гостевых операционных систем. Строго говоря, при таком виде виртуализации пользователем не создаются виртуальные машины, а происходит изоляция каких-либо процессов на уровне операционной системы. В данный момент многие из известных операционных систем используют такой подход. Примером может послужить использование UML (User-mode Linux), в котором «гостевое» ядро запускается в пользовательском пространстве базового ядра (в его контексте).



5.**Паравиртуализация**.

Системы для паравиртуализации также имеют свой гипервизор, а API-вызовы к гостевой системе, называются «hypercalls» (гипервызовы).

В отличие от полной виртуализации, гипервизор паравиртуализации не скрывает себя от гостевых операционных систем. Но в этом случае они должны быть подготовлены к работе с этой системой. В результате, применение паравиртуализации требует модификации кода гостевой ОС на уровне ядра, что позволяет ей общаться с гипервизором на более высоком уровне, обеспечивая более высокое быстродействие.
![[Pasted image 20250619205755.png]]
Рис. 7 Паравиртуализация

Гипервизор предоставляет гостевой ОС специальный программный интерфейс (API), исключающий необходимость прямого обращения  к таким ресурсам, как, например, таблицы страниц памяти.

При применении паравиртуализации нет необходимости эмулировать аппаратное обеспечение, более того, гостевая ОС и гипервизор используют общий набор драйверов, что выгодно отличает эту технологию от эмуляции устройств, когда гостевая ОС и гипервизор используют различные драйверы.  До недавних пор основным недостатком паравиртуализации являлась необходимость модификации кода ОС, что, с точки зрения сообщества, Open Source не так и критично, однако, с появлением аппаратной поддержки виртуализации, такой как Intel VT и AMD-V, стало возможным выполнение любых ОС без модификации ядра. Снятие ограничений по типу выполняемых ОС в сочетании с высокой производительностью и низкими накладными расходами позволяет говорить о хороших перспективах этого метода виртуализации, хотя предпочтение производителей  отдается системам полной виртуализации. Двигателями этой технологии являются компании XenSource и Virtual Iron, утверждающие, что быстродействие паравиртуализации выше.

Примеры платформ паравиртуализации: XenSource, Virtual Iron,



6.**Виртуализация уровня операционной системы**.

Виртуализация уровня операционной системы. Эта техника виртуализирует серверы непосредственно над операционной системой.
![[Pasted image 20250619205815.png]]
Рис.8 Виртуализация уровня операционной системы

Этот метод поддерживает единственную операционную систему и, в самом общем случае, просто изолирует независимые виртуальные серверы (контейнеры) друг от друга.

 Для разделения ресурсов одного сервера между контейнерами, данная виртуализация требует внесения изменений в ядро операционной системы (например, как в случае с OpenVZ), но при этом преимуществом является родная производительность, без «накладных расходов» на виртуализацию устройств.

Виртуализация уровня операционной системы изолирует виртуальные серверы.

Гостевая система, в данном случае, разделяет использование одного ядра хостовой операционной системы с другими гостевыми системами. Виртуальная машина представляет собой окружение для приложений, запускаемых изолированно. Данный тип виртуализации применяется при организации систем хостинга, когда в рамках одного экземпляра ядра требуется поддерживать несколько виртуальных серверов клиентов.

Примеры виртуализации уровня ОС: Linux-VServer, Virtuozzo, OpenVZ, Solaris Containers и FreeBSD Jails.



7.**Виртуализация уровня приложений**.
Виртуализация приложений подразумевает применение модели сильной изоляции прикладных программ с управляемым взаимодействием с ОС, при которой виртуализируется каждый экземпляр приложений, все его основные компоненты: файлы (включая системные), реестр, шрифты, INI-файлы, COM-объекты, службы. Приложение исполняется без процедуры инсталляции в традиционном ее понимании и может запускаться прямо с внешних носителей (например, с флэш-карт или из сетевых папок)

Этот вид виртуализации не похож на все остальные: если в предыдущих случаях создаются виртуальные среды или виртуальные машины, использующиеся для изоляции приложений, то в данном случае само приложение помещается в контейнер с необходимыми элементами для своей работы: файлами реестра, конфигурационными файлами, пользовательскими и системными объектами. В результате получается приложение, не требующее установки на аналогичной платформе. При переносе такого приложения на другую машину и его запуске, виртуальное окружение, созданное для программы, разрешает конфликты между ней и операционной системой, а также другими приложениями.
![[Pasted image 20250619210121.png]]
Рисунок 2.7 Виртуализация приложений

Данная технология позволяет использовать на одном компьютере, а точнее в одной и той же операционной системе несколько несовместимых между собой приложений одновременно. Виртуализация приложений позволяет пользователям запускать одно и тоже заранее сконфигурированное приложение или группу приложений с сервера. При этом приложения будут работать независимо друг от друга, не внося никаких изменений в операционную систему. Фактически именно такой вариант виртуализации используется в Sun Java Virtual Machine, Microsoft Application Virtualization (ранее называлось Softgrid), Thinstall (в начале 2008 г. вошла в состав VMware), Symantec/Altiris



8.Виртуализация представлений (рабочих мест) 

Виртуализация представлений подразумевает эмуляцию интерфейса пользователя. Т.е. пользователь видит приложение и работает с ним на своём терминале, хотя на самом деле приложение выполняется на удалённом сервере, а пользователю передаётся лишь картинка удалённого приложения. В зависимости от режима работы пользователь может видеть удалённый рабочий стол и запущенное на нём приложение, либо только само окно приложения.
![[Pasted image 20250619210211.png]]
Рисунок 2.8 Виртуализация представлений

Потребности бизнеса меняют наши представления об организации рабочего процесса. Персональный компьютер, ставший за последние десятилетия неотъемлемым атрибутом офиса и средством выполнения большинства офисных задач, перестает успевать за растущими потребностями бизнеса. Реальным инструментом пользователя оказывается программное обеспечение, которое лишь привязано к ПК, делая его промежуточным звеном корпоративной информационной системы. В результате активное развитие получают «облачные» вычисления, когда пользователи имеют доступ к собственным данным, но не управляют и не задумываются об инфраструктуре, операционной системе и собственно программном обеспечении, с которым они работают.

Вместе с тем, с ростом масштабов организаций, использование в ИТ-инфраструктуре пользовательских ПК вызывает ряд сложностей:

• большие операционные издержки на поддержку компьютерного парка;

• сложность, связанная с управлением настольными ПК;

• обеспечение пользователям безопасного и надежного доступа к ПО и приложениям необходимым для работы;

• техническое сопровождение пользователей;

• установка и обновление лицензий на ПО и техническое обслуживание;

• резервное копирование и т.д.

Уйти от этих сложностей и сократить издержки, связанные с их решением, возможно благодаря применению технологии виртуализации рабочих мест сотрудников на базе инфраструктуры виртуальных ПК – Virtual Desktop Infrastructure (VDI). VDI позволяет отделить пользовательское ПО от аппаратной части – персонального компьютера, - и осуществлять доступ к клиентским приложениям через терминальные устройства.

VDI - комбинация соединений с удаленным рабочим столом и виртуализации. На обслуживающих серверах работает множество виртуальных машин, с такими клиентскими операционными системами, как Windows 7, Windows Vista и Windows XP или Linux операционными системами. Пользователи дистанционно подключаются к виртуальной машине своей настольной среды. На локальных компьютерах пользователей в качестве удаленного настольного клиента могут применяться терминальные клиенты, старое оборудование с Microsoft Windows Fundamentals или дистрибутив Linux.

VDI полностью изолирует виртуальную среду пользователей от других виртуальных сред, так как каждый пользователь подключается к отдельной виртуальной машине. Иногда используется статическая инфраструктура VDI, в которой пользователь всегда подключается к той же виртуальной машине, в других случаях динамическая VDI, в которой пользователи динамически подключаются к различным виртуальным машинам, и виртуальные машины создаются по мере необходимости. При использовании любой модели важно хранить данные пользователей вне виртуальных машин и быстро предоставлять приложения.

Наряду с централизованным управлением и простым предоставлением компьютеров, VDI обеспечивает доступ к настольной среде из любого места, если пользователи могут дистанционно подключиться к серверу.

Представим, что на клиентском компьютере возникла неполадка. Придется выполнить диагностику и, возможно, переустановить операционную систему. Благодаря VDI в случае неполадок можно просто удалить виртуальную машину и за несколько секунд создать новую среду, с помощью созданного заранее шаблона виртуальной машины. VDI обеспечивает дополнительную безопасность, так как данные не хранятся локально на настольном компьютере или ноутбуке.

Как пример виртуализации представлений можно рассматривать и технологию тонких терминалов, которые фактически виртуализируют рабочие места пользователей настольных систем: пользователь не привязан к какому-то конкретному ПК, а может получить доступ к своим файлам и приложениям, которые располагаются на сервере, с любого удаленного терминала после выполнения процедуры авторизации. Все команды пользователя и изображение сеанса на мониторе эмулируются с помощью ПО управления тонкими клиентами. Применение этой технологии позволяет централизовать обслуживание клиентских рабочих мест и резко сократить расходы на их поддержку — например, для перехода на следующую версию клиентского приложения новое ПО нужно инсталлировать только один раз на сервере.

![[Pasted image 20250619210232.png]]
Рисунок 2.9 Пример тонкого клиента. Терминал Sun Ray.

Одним из наиболее известных тонких клиентов является терминал Sun Ray, для организации работы которого используется программное обеспечение Sun Ray Server Software. Для начала сеанса Sun Ray достаточно лишь вставить в это устройство идентификационную смарт-карту. Применение смарт-карты существенно повышает мобильность пользователя — он может переходить с одного Sun Ray на другой, переставляя между ними свою карточку и сразу продолжать работу со своими приложениями с того места, где он остановился на предыдущем терминале. А отказ от жесткого диска не только обеспечивает мобильность пользователей и повышает безопасность данных, но и существенно снижает энергопотребление по сравнению с обычными ПК, поэтому терминал Sun не имеет вентилятора и работает практически бесшумно. Кроме того, сокращение числа компонентов тонкого терминала уменьшает и риск выхода его из строя, а следовательно, экономит расходы на его обслуживание. Еще одно преимущество Sun Ray — это существенно расширенный по сравнению с обычными ПК жизненный цикл продукта, поскольку в нём нет компонентов, которые могут морально устареть.



**Китайский друг:**

Виртуализация платформ — это создание программных систем на основе существующих аппаратно-программных комплексов. Хостовая система предоставляет ресурсы, а симулируемые ею гостевые системы работают поверх неё. Для стабильности гостевых систем требуется надёжное ПО и аппаратное обеспечение хоста с необходимыми интерфейсами. Виды виртуализации различаются по глубине симуляции аппаратного обеспечения, и терминология в этой области не всегда единообразна.

**Основные виды:**

1. **Аппаратные разделы (Partition):** Физическое разделение ресурсов сервера (процессоры, память, ввод-вывод) на изолированные части. Каждый раздел работает со своей ОС независимо. Обеспечивает полную изоляцию, защиту от сбоев, отсутствие накладных расходов и эффективное использование ресурсов. Реализации: LPAR (IBM), nPar (HP), DSD (Sun).
2. **Эмуляция:**

- **Эмуляция среды исполнения:** Создание виртуальной машины для запуска программ (например, Java VM).
- **Эмуляция оборудования:** Полное моделирование "чужого" оборудования программным путём. Позволяет запускать ОС и ПО для другой архитектуры (например, x86 на RISC), но работает крайне медленно (замедление до 100 раз). Используется для разработки, тестирования и отладки (Bochs, QEMU без ускорения).

4. **Полная (аппаратная/нативная) виртуализация:** Гостевая ОС работает с процессором напрямую. Гипервизор (монитор виртуальных машин) виртуализирует минимально необходимый набор аппаратуры, обеспечивая изоляцию ВМ и прямое обращение к ресурсам. Требует одинаковой архитектуры хоста и гостя. Обеспечивает высокую производительность (близкую к "железу"). Для эффективности гипервизора архитектура процессора должна удовлетворять критериям Попека-Голдберга (служебные команды = подмножество привилегированных). Современные решения используют аппаратную поддержку (Intel VT-x, AMD-V) — VMware ESXi, Hyper-V, KVM.
5. **Частичная виртуализация:** Симуляция _части_ аппаратного окружения (чаще всего адресного пространства). Изолирует процессы, но не позволяет запускать полноценные гостевые ОС (например, User-mode Linux).
6. **Паравиртуализация:** Гипервизор предоставляет гостевой ОС специальный API (гипервызовы). Гостевая ОС _знает_ о гипервизоре и модифицируется для взаимодействия с ним напрямую, минуя эмуляцию. Это повышает производительность и позволяет использовать общие драйверы. Требует модификации ядра гостевой ОС (Xen).
7. **Виртуализация уровня ОС:** Над одним ядром хостовой ОС создаются изолированные контейнеры (виртуальные среды). Все контейнеры разделяют одно ядро, но имеют свои процессы, файловые системы и сетевые настройки. Обеспечивает минимальные накладные расходы и высокую плотность размещения (OpenVZ, LXC, Docker).
8. **Виртуализация приложений:** Приложение и все его зависимости (файлы, реестр, библиотеки) упаковываются в изолированный контейнер ("пузырь"). Запускается без установки в ОС, не конфликтует с другими приложениями (MS App-V, VMware ThinApp, Java JRE).
9. **Виртуализация представлений (рабочих мест):** Пользовательский интерфейс (рабочий стол или отдельное приложение) исполняется на сервере, а на клиентское устройство передается только изображение. Позволяет централизованно управлять рабочими местами, повышает безопасность и мобильность. Основана на технологиях VDI (Virtual Desktop Infrastructure) и тонких клиентах (VMware Horizon, Citrix Virtual Apps).