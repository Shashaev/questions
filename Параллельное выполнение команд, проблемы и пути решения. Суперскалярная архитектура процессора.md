
#Автор_Рыжов_Андрей 

Дальнейшее повышение производительности возможно только на пути распараллеливания операций. Так появились процессора с так называемой суперскалярной обработкой. Смысл суперскалярности закдючается в том, что в аппаратуру микропроцессора закладываются средства позволяющие одновременно выполнять несколько скалярных операций т.е. команд обработки пары чисел. Такой подход позволяет увеличить производительность пропорционально числу  одновременно выполняемых операций.

Но здесь не все просто, возьмем простенькую программу:

a = 1

b = 2

c = a + b

Первые две инструкции вполне можно выполнять параллельно, только третья от них зависит. А значит — всю программу можно выполнить за два шага, а не за  один.

Такая ситуация называется связностью по данным.  Все будет хорошо, если на процессор будет идти несвязанный по данным поток команд, а если этого нет, то параллельная обработка встанет. 

Есть 3 подхода  к решению этой задачи:

 - заставить программиста на этапе написания программы думать об этом;

 - заставить компилятор формировать независимые группы команд на этапе компиляции;

 - заставить устройство управления процессора выбирать из потока команд несвязанные команды и отправлять их на параллельное исполнение. Этот прием получил название - динамическое исполнения команд и используется практически во всех процессорах.

Для упрощения программирования и схемы процессора были разработаны процессоры с явным указанием параллельно выполняемых команд.

Такая архитектура называется VLIW (very long instruction word — «очень длинная машинная команда»), в этом процессоре в команде столько полей, сколько параллельных операций может выполнить процессор. Система очень эффективна, но требует уникальных программных кодов

 Её дальнейшее развитие получило имя EPIC (explicitly parallel instruction computing) — микропроцессорная архитектура с явным параллелизмом команд) 

Самые известные процессоры с такой архитектурой — Intel Itanium.

Дальнейший путь увеличения количества инструкций, выполняемых за один такт, это поддержка многопотоковости (у Intel это технология Hyper Threading) В этой технологии суперскалярный процессор самостоятельно распараллеливает не команды одного потока, а команды нескольких параллельно запущенных потоков. (технология Hyper Threading – 2 потока)

При поддержке многопотоковости  физически процессорное ядро одно, но простаивающие при выполнении одной задачи мощности процессора могут быть использованы для выполнения другой. Операционная система видит один процессор (или одно ядро процессора) с технологией Hyper Threading как два независимых процессора. Но на самом деле, конечно, Hyper Threading работает хуже, чем реальные два независимых процессора т.к. задачи на нем будут конкурировать за вычислительные мощности между собой, тем не менее это дает выигрыш в общей производительности. Следующий шаг – это реальная многоядерность.

Технологии параллелизма на уровне инструкций активно развивались в 90е и первую половину 2000х годов, но в настоящее время их потенциал практически исчерпан. Можно переставлять местами команды, переименовывать регистры и использовать другие оптимизации, выделяя из последовательного кода параллельно исполняющиеся участки, но все равно зависимости и ветвления не дадут полностью автоматически распараллелить код. Параллелизм на уровне инструкций хорош тем, что не требует вмешательства человека — но этим он и плох: пока человек умнее микропроцессора, писать по-настоящему параллельный код придется ему.

проблемы написания кода под суперскалярную архитектуру:

1. необходимость переписывать трансляторы

2. необходимо программировать по особому

3. необходимо усложнять процессор