**25. Методы расширения адресного пространства в малоразрядных МП и МКЭВМ. (ответ из конспекта)**

Известно, что размер адресного пространства определяется разрядностью шины адреса микропроцессора. Достаточно часто при развитии микропроцессорной системы возможности адресного пространства исчерпываются. В таком случае приходится прибегать к методам расширения адресного пространства. По большому счету методов два: Переключение подсистем и относительная адресация.

**Переключение подсистем**

При этом методе к системной шине процессора можно подключить параллельно несколько подсистем, но в любой момент времени разрешается работать только одной подсистеме
![[WINWORD_hpY2tgBLmY.png]]

Практическая реализация отличается реализацией блока выбора подсистемы.

1. Подсистема выбирается средствами ЦП.

Процессор сам вырабатывает сигналы выбора.

 К примеру у процессора  8086 есть признаки: обращения к сегментному регистру (4 регистра),  и подсистеме ввода/вывода, которые можно использовать в качестве сигналов выбора, откуда следует, что к нему можно подключить 4 Мб памяти и систему ввода/вывода.
 ![[WINWORD_jmsw2zHgfQ.png]]
 2. Система выбирается через программно доступный регистр, подключенный  к порту.
 ![[WINWORD_vMPG8thQLO.png]]
 Для исключения ошибок сигналы выбора лучше формировать с помощью дешифратора

3. Сигналы вырабатываются внешним устройством. В зависимости от условий использования.

Если две памяти отображаются на одно адресное пространство, то одна из них называется теневой, а прием  называется затенением –

**Относительная адресация**

При относительной адресации текущий адрес складывается с некоторой базой и исполнительный адрес (Аисп) может иметь любую разрядность. Это не означает, что мы сразу получили доступ ко всей большой памяти, доступ остается в рамках адресации текущего адреса (в окне), но окно можно перемещать, меняя значение базы.
![[WINWORD_etljg6FsT8.png]]
m>n AИСП = B + Aт (База + смещение), где Аисп – адрес расширенной памяти, Ат – текущий адрес , вырабатываемый процессором, В – базовый адрес, определяющий положения окна доступа к расширенной памяти.

В зависимости от того как мы будем складывать, будет меняться и схема и шаг перемещения окна в расширенной памяти.

Самый простой случай (страничная организация). Сумматор не нужен вообще, а шаг перемещения окна равен размеру памяти процессора
![[WINWORD_vfAa9wVAjx.png]]
При этом база будет короткой, называется номером страницы и будет храниться в регистре страниц.

Если складывать без сдвига или с небольшим сдвигом получим сегментную организацию памяти. При сегментной организации нужен сумматор, и шаг перемещения окна определяется сдвигом текущего адреса относительно базы.
![[WINWORD_ueio4fLCfu.png]]
(У процессора 8086 база называется указателем сегмента, а сдвиг равен 4 разрядам)

Для перемещения окна по расширенной памяти необходимо менять значение базы, это тормозит вычисления. Для увеличения быстродействия нужно увеличить число базовых регистров и загружать их заранее. При этом появляется проблема выбора регистра на лету без задержек.

Выбор базового регистра можно осуществить двумя способами:

1.     Явный (указание номера регистра в команде или адресе) (так у IBM 360, 16 регистров, у PDP-11 -8 регистров.)

2.     Неявный (с привязкой к типу данных) (так у 8086, 4 регистра)

